#> asset:object/2022.ecual_critical/tick/cast
#
# 発動
#
# @within function asset:object/2022.ecual_critical/tick/

# 円
    particle end_rod ^-0.0 ^0.0 ^8.0 ^-0.0 ^1000000000.0 ^8.0 0.00000000050 0 force @a[distance=..32]
    particle end_rod ^0.784 ^0.0 ^7.961 ^0.784 ^1000000000.0 ^7.961 0.00000000037 0 force @a[distance=..32]
    particle end_rod ^1.561 ^0.0 ^7.846 ^1.561 ^1000000000.0 ^7.846 0.00000000030 0 force @a[distance=..32]
    particle end_rod ^2.322 ^0.0 ^7.656 ^2.322 ^1000000000.0 ^7.656 0.00000000025 0 force @a[distance=..32]
    particle end_rod ^3.061 ^0.0 ^7.391 ^3.061 ^1000000000.0 ^7.391 0.00000000022 0 force @a[distance=..32]
    particle end_rod ^3.771 ^0.0 ^7.055 ^3.771 ^1000000000.0 ^7.055 0.00000000025 0 force @a[distance=..32]
    particle end_rod ^4.445 ^0.0 ^6.652 ^4.445 ^1000000000.0 ^6.652 0.00000000030 0 force @a[distance=..32]
    particle end_rod ^5.075 ^0.0 ^6.184 ^5.075 ^1000000000.0 ^6.184 0.00000000037 0 force @a[distance=..32]
    particle end_rod ^5.657 ^0.0 ^5.657 ^5.657 ^1000000000.0 ^5.657 0.00000000050 0 force @a[distance=..32]
    particle end_rod ^6.184 ^0.0 ^5.075 ^6.184 ^1000000000.0 ^5.075 0.00000000037 0 force @a[distance=..32]
    particle end_rod ^6.652 ^0.0 ^4.445 ^6.652 ^1000000000.0 ^4.445 0.00000000030 0 force @a[distance=..32]
    particle end_rod ^7.055 ^0.0 ^3.771 ^7.055 ^1000000000.0 ^3.771 0.00000000025 0 force @a[distance=..32]
    particle end_rod ^7.391 ^0.0 ^3.061 ^7.391 ^1000000000.0 ^3.061 0.00000000022 0 force @a[distance=..32]
    particle end_rod ^7.656 ^0.0 ^2.322 ^7.656 ^1000000000.0 ^2.322 0.00000000025 0 force @a[distance=..32]
    particle end_rod ^7.846 ^0.0 ^1.561 ^7.846 ^1000000000.0 ^1.561 0.00000000030 0 force @a[distance=..32]
    particle end_rod ^7.961 ^0.0 ^0.784 ^7.961 ^1000000000.0 ^0.784 0.00000000037 0 force @a[distance=..32]
    particle end_rod ^8.0 ^0.0 ^0.0 ^8.0 ^1000000000.0 ^0.0 0.00000000050 0 force @a[distance=..32]
    particle end_rod ^7.961 ^0.0 ^-0.784 ^7.961 ^1000000000.0 ^-0.784 0.00000000037 0 force @a[distance=..32]
    particle end_rod ^7.846 ^0.0 ^-1.561 ^7.846 ^1000000000.0 ^-1.561 0.00000000030 0 force @a[distance=..32]
    particle end_rod ^7.656 ^0.0 ^-2.322 ^7.656 ^1000000000.0 ^-2.322 0.00000000025 0 force @a[distance=..32]
    particle end_rod ^7.391 ^0.0 ^-3.061 ^7.391 ^1000000000.0 ^-3.061 0.00000000022 0 force @a[distance=..32]
    particle end_rod ^7.055 ^0.0 ^-3.771 ^7.055 ^1000000000.0 ^-3.771 0.00000000025 0 force @a[distance=..32]
    particle end_rod ^6.652 ^0.0 ^-4.445 ^6.652 ^1000000000.0 ^-4.445 0.00000000030 0 force @a[distance=..32]
    particle end_rod ^6.184 ^0.0 ^-5.075 ^6.184 ^1000000000.0 ^-5.075 0.00000000037 0 force @a[distance=..32]
    particle end_rod ^5.657 ^0.0 ^-5.657 ^5.657 ^1000000000.0 ^-5.657 0.00000000050 0 force @a[distance=..32]
    particle end_rod ^5.075 ^0.0 ^-6.184 ^5.075 ^1000000000.0 ^-6.184 0.00000000037 0 force @a[distance=..32]
    particle end_rod ^4.445 ^0.0 ^-6.652 ^4.445 ^1000000000.0 ^-6.652 0.00000000030 0 force @a[distance=..32]
    particle end_rod ^3.771 ^0.0 ^-7.055 ^3.771 ^1000000000.0 ^-7.055 0.00000000025 0 force @a[distance=..32]
    particle end_rod ^3.061 ^0.0 ^-7.391 ^3.061 ^1000000000.0 ^-7.391 0.00000000022 0 force @a[distance=..32]
    particle end_rod ^2.322 ^0.0 ^-7.656 ^2.322 ^1000000000.0 ^-7.656 0.00000000025 0 force @a[distance=..32]
    particle end_rod ^1.561 ^0.0 ^-7.846 ^1.561 ^1000000000.0 ^-7.846 0.00000000030 0 force @a[distance=..32]
    particle end_rod ^0.784 ^0.0 ^-7.961 ^0.784 ^1000000000.0 ^-7.961 0.00000000037 0 force @a[distance=..32]
    particle end_rod ^-0.0 ^0.0 ^-8.0 ^-0.0 ^1000000000.0 ^-8.0 0.00000000050 0 force @a[distance=..32]
    particle end_rod ^-0.784 ^0.0 ^-7.961 ^-0.784 ^1000000000.0 ^-7.961 0.00000000037 0 force @a[distance=..32]
    particle end_rod ^-1.561 ^0.0 ^-7.846 ^-1.561 ^1000000000.0 ^-7.846 0.00000000030 0 force @a[distance=..32]
    particle end_rod ^-2.322 ^0.0 ^-7.656 ^-2.322 ^1000000000.0 ^-7.656 0.00000000025 0 force @a[distance=..32]
    particle end_rod ^-3.061 ^0.0 ^-7.391 ^-3.061 ^1000000000.0 ^-7.391 0.00000000022 0 force @a[distance=..32]
    particle end_rod ^-3.771 ^0.0 ^-7.055 ^-3.771 ^1000000000.0 ^-7.055 0.00000000025 0 force @a[distance=..32]
    particle end_rod ^-4.445 ^0.0 ^-6.652 ^-4.445 ^1000000000.0 ^-6.652 0.00000000030 0 force @a[distance=..32]
    particle end_rod ^-5.075 ^0.0 ^-6.184 ^-5.075 ^1000000000.0 ^-6.184 0.00000000037 0 force @a[distance=..32]
    particle end_rod ^-5.657 ^0.0 ^-5.657 ^-5.657 ^1000000000.0 ^-5.657 0.00000000050 0 force @a[distance=..32]
    particle end_rod ^-6.184 ^0.0 ^-5.075 ^-6.184 ^1000000000.0 ^-5.075 0.00000000037 0 force @a[distance=..32]
    particle end_rod ^-6.652 ^0.0 ^-4.445 ^-6.652 ^1000000000.0 ^-4.445 0.00000000030 0 force @a[distance=..32]
    particle end_rod ^-7.055 ^0.0 ^-3.771 ^-7.055 ^1000000000.0 ^-3.771 0.00000000025 0 force @a[distance=..32]
    particle end_rod ^-7.391 ^0.0 ^-3.061 ^-7.391 ^1000000000.0 ^-3.061 0.00000000022 0 force @a[distance=..32]
    particle end_rod ^-7.656 ^0.0 ^-2.322 ^-7.656 ^1000000000.0 ^-2.322 0.00000000025 0 force @a[distance=..32]
    particle end_rod ^-7.846 ^0.0 ^-1.561 ^-7.846 ^1000000000.0 ^-1.561 0.00000000030 0 force @a[distance=..32]
    particle end_rod ^-7.961 ^0.0 ^-0.784 ^-7.961 ^1000000000.0 ^-0.784 0.00000000037 0 force @a[distance=..32]
    particle end_rod ^-8.0 ^0.0 ^0.0 ^-8.0 ^1000000000.0 ^0.0 0.00000000050 0 force @a[distance=..32]
    particle end_rod ^-7.961 ^0.0 ^0.784 ^-7.961 ^1000000000.0 ^0.784 0.00000000037 0 force @a[distance=..32]
    particle end_rod ^-7.846 ^0.0 ^1.561 ^-7.846 ^1000000000.0 ^1.561 0.00000000030 0 force @a[distance=..32]
    particle end_rod ^-7.656 ^0.0 ^2.322 ^-7.656 ^1000000000.0 ^2.322 0.00000000025 0 force @a[distance=..32]
    particle end_rod ^-7.391 ^0.0 ^3.061 ^-7.391 ^1000000000.0 ^3.061 0.00000000022 0 force @a[distance=..32]
    particle end_rod ^-7.055 ^0.0 ^3.771 ^-7.055 ^1000000000.0 ^3.771 0.00000000025 0 force @a[distance=..32]
    particle end_rod ^-6.652 ^0.0 ^4.445 ^-6.652 ^1000000000.0 ^4.445 0.00000000030 0 force @a[distance=..32]
    particle end_rod ^-6.184 ^0.0 ^5.075 ^-6.184 ^1000000000.0 ^5.075 0.00000000037 0 force @a[distance=..32]
    particle end_rod ^-5.657 ^0.0 ^5.657 ^-5.657 ^1000000000.0 ^5.657 0.00000000050 0 force @a[distance=..32]
    particle end_rod ^-5.075 ^0.0 ^6.184 ^-5.075 ^1000000000.0 ^6.184 0.00000000037 0 force @a[distance=..32]
    particle end_rod ^-4.445 ^0.0 ^6.652 ^-4.445 ^1000000000.0 ^6.652 0.00000000030 0 force @a[distance=..32]
    particle end_rod ^-3.771 ^0.0 ^7.055 ^-3.771 ^1000000000.0 ^7.055 0.00000000025 0 force @a[distance=..32]
    particle end_rod ^-3.061 ^0.0 ^7.391 ^-3.061 ^1000000000.0 ^7.391 0.00000000022 0 force @a[distance=..32]
    particle end_rod ^-2.322 ^0.0 ^7.656 ^-2.322 ^1000000000.0 ^7.656 0.00000000025 0 force @a[distance=..32]
    particle end_rod ^-1.561 ^0.0 ^7.846 ^-1.561 ^1000000000.0 ^7.846 0.00000000030 0 force @a[distance=..32]
    particle end_rod ^-0.784 ^0.0 ^7.961 ^-0.784 ^1000000000.0 ^7.961 0.00000000037 0 force @a[distance=..32]

# 追加パーティクル
    particle dust 1 1 100000000 4 ~ ~1 ~ 3.75 0.5 3.75 0 200 force @a[distance=..32]
    particle gust_emitter ~ ~0.25 ~ 1.25 0.5 1.25 0 5 force @a[distance=..32]

# 音
    playsound entity.generic.explode hostile @a[distance=..32] ~ ~ ~ 1 1.5
    playsound entity.generic.explode hostile @a[distance=..32] ~ ~ ~ 1 0.9
    playsound entity.generic.explode hostile @a[distance=..32] ~ ~ ~ 1 0.6
    playsound entity.player.swim hostile @a[distance=..32] ~ ~ ~ 1 1
    playsound entity.player.swim hostile @a[distance=..32] ~ ~ ~ 1 1.01
    playsound item.trident.thunder hostile @a[distance=..32] ~ ~ ~ 0.7 2
    playsound entity.wither.shoot hostile @a[distance=..32] ~ ~ ~ 0.9 1.5


#> score_holder
# @private
    #declare score_holder $DamageTemp

# 難易度値を取得
    function api:global_vars/get_difficulty

# ダメージ式：50N + 50
# Nは難易度値を示します
    execute store result score $DamageTemp Temporary run data get storage api: Return.Difficulty 50
    scoreboard players add $DamageTemp Temporary 50

# ダメージ
    # 引数の設定
    # 与えるダメージ
        execute store result storage api: Argument.Damage int 1 run scoreboard players get $DamageTemp Temporary
    # 第一属性
        data modify storage api: Argument.AttackType set value "Magic"
    # 第二属性
        data modify storage api: Argument.ElementType set value "Water"
    # デスログ
        data modify storage api: Argument.DeathMessage append value '[{"translate": "%2$sの攻撃が200回転した！ %1$sは死んだ！","with":[{"selector":"@s"},{"nbt":"Return.AttackerName","storage":"lib:","interpret":true}]}]'
# 補正functionを実行
        data modify storage api: Argument.MobUUID set from storage asset:context this.MobUUID
        function api:damage/modifier_manual
# ダメージを与える
    execute as @a[tag=!PlayerShouldInvulnerable,distance=..8] at @s run function api:damage/
# リセット
    function api:damage/reset

# リセット
    scoreboard players reset $DamageTemp Temporary

# キル
    kill @s
