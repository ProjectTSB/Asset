#> asset:object/2014.dimension_sword/tick/cast
#
# 発動
#
# @within function asset:object/2014.dimension_sword/tick/

# 演出
    particle flame ^-0.0 ^0.0 ^2.0 ^3.36 ^966234944.0 ^257662720.0 0.00000000016 0 force @a[distance=..32]
    particle flame ^0.39 ^0.0 ^1.962 ^142325680.0 ^683941184.0 ^715519296.0 0.00000000022 0 force @a[distance=..32]
    particle flame ^0.765 ^0.0 ^1.848 ^98603264.0 ^966234944.0 ^238049312.0 0.00000000016 0 force @a[distance=..32]
    particle flame ^1.111 ^0.0 ^1.663 ^405309184.0 ^683941120.0 ^606588096.0 0.00000000022 0 force @a[distance=..32]
    particle flame ^1.414 ^0.0 ^1.414 ^182195040.0 ^966234944.0 ^182195040.0 0.00000000016 0 force @a[distance=..32]
    particle flame ^1.663 ^0.0 ^1.111 ^606588096.0 ^683941120.0 ^405309184.0 0.00000000022 0 force @a[distance=..32]
    particle flame ^1.848 ^0.0 ^0.765 ^238049312.0 ^966234944.0 ^98603264.0 0.00000000016 0 force @a[distance=..32]
    particle flame ^1.962 ^0.0 ^0.39 ^715519296.0 ^683941184.0 ^142325680.0 0.00000000022 0 force @a[distance=..32]
    particle flame ^2.0 ^0.0 ^0.0 ^257662720.0 ^966234944.0 ^-0.96 0.00000000016 0 force @a[distance=..32]
    particle flame ^1.962 ^0.0 ^-0.39 ^715519296.0 ^683941184.0 ^-142325680.0 0.00000000022 0 force @a[distance=..32]
    particle flame ^1.848 ^0.0 ^-0.765 ^238049312.0 ^966234944.0 ^-98603264.0 0.00000000016 0 force @a[distance=..32]
    particle flame ^1.663 ^0.0 ^-1.111 ^606588096.0 ^683941120.0 ^-405309184.0 0.00000000022 0 force @a[distance=..32]
    particle flame ^1.414 ^0.0 ^-1.414 ^182195040.0 ^966234944.0 ^-182195040.0 0.00000000016 0 force @a[distance=..32]
    particle flame ^1.111 ^0.0 ^-1.663 ^405309184.0 ^683941120.0 ^-606588096.0 0.00000000022 0 force @a[distance=..32]
    particle flame ^0.765 ^0.0 ^-1.848 ^98603264.0 ^966234944.0 ^-238049312.0 0.00000000016 0 force @a[distance=..32]
    particle flame ^0.39 ^0.0 ^-1.962 ^142325680.0 ^683941184.0 ^-715519296.0 0.00000000022 0 force @a[distance=..32]
    particle flame ^-0.0 ^0.0 ^-2.0 ^3.36 ^966234944.0 ^-257662720.0 0.00000000016 0 force @a[distance=..32]
    particle flame ^-0.39 ^0.0 ^-1.962 ^-142325680.0 ^683941184.0 ^-715519296.0 0.00000000022 0 force @a[distance=..32]
    particle flame ^-0.765 ^0.0 ^-1.848 ^-98603264.0 ^966234944.0 ^-238049312.0 0.00000000016 0 force @a[distance=..32]
    particle flame ^-1.111 ^0.0 ^-1.663 ^-405309184.0 ^683941120.0 ^-606588096.0 0.00000000022 0 force @a[distance=..32]
    particle flame ^-1.414 ^0.0 ^-1.414 ^-182195040.0 ^966234944.0 ^-182195040.0 0.00000000016 0 force @a[distance=..32]
    particle flame ^-1.663 ^0.0 ^-1.111 ^-606588096.0 ^683941120.0 ^-405309184.0 0.00000000022 0 force @a[distance=..32]
    particle flame ^-1.848 ^0.0 ^-0.765 ^-238049312.0 ^966234944.0 ^-98603264.0 0.00000000016 0 force @a[distance=..32]
    particle flame ^-1.962 ^0.0 ^-0.39 ^-715519296.0 ^683941184.0 ^-142325680.0 0.00000000022 0 force @a[distance=..32]
    particle flame ^-2.0 ^0.0 ^0.0 ^-257662720.0 ^966234944.0 ^-0.96 0.00000000016 0 force @a[distance=..32]
    particle flame ^-1.962 ^0.0 ^0.39 ^-715519296.0 ^683941184.0 ^142325680.0 0.00000000022 0 force @a[distance=..32]
    particle flame ^-1.848 ^0.0 ^0.765 ^-238049312.0 ^966234944.0 ^98603264.0 0.00000000016 0 force @a[distance=..32]
    particle flame ^-1.663 ^0.0 ^1.111 ^-606588096.0 ^683941120.0 ^405309184.0 0.00000000022 0 force @a[distance=..32]
    particle flame ^-1.414 ^0.0 ^1.414 ^-182195040.0 ^966234944.0 ^182195040.0 0.00000000016 0 force @a[distance=..32]
    particle flame ^-1.111 ^0.0 ^1.663 ^-405309184.0 ^683941120.0 ^606588096.0 0.00000000022 0 force @a[distance=..32]
    particle flame ^-0.765 ^0.0 ^1.848 ^-98603264.0 ^966234944.0 ^238049312.0 0.00000000016 0 force @a[distance=..32]
    particle flame ^-0.39 ^0.0 ^1.962 ^-142325680.0 ^683941184.0 ^715519296.0 0.00000000022 0 force @a[distance=..32]
# コレクション 4--円.010
    particle end_rod ^-0.0 ^0.0 ^2.2 ^5.251 ^915315008.0 ^402738656.0 0.00000000011 0 force @a[distance=..32]
    particle end_rod ^0.429 ^0.0 ^2.158 ^169622608.0 ^494009440.0 ^852750208.0 0.00000000020 0 force @a[distance=..32]
    particle end_rod ^0.842 ^0.0 ^2.033 ^154121456.0 ^915314944.0 ^372082176.0 0.00000000011 0 force @a[distance=..32]
    particle end_rod ^1.222 ^0.0 ^1.829 ^483044256.0 ^494009440.0 ^722926720.0 0.00000000020 0 force @a[distance=..32]
    particle end_rod ^1.556 ^0.0 ^1.556 ^284779168.0 ^915315008.0 ^284779168.0 0.00000000011 0 force @a[distance=..32]
    particle end_rod ^1.829 ^0.0 ^1.222 ^722926720.0 ^494009440.0 ^483044256.0 0.00000000020 0 force @a[distance=..32]
    particle end_rod ^2.033 ^0.0 ^0.842 ^372082176.0 ^915314944.0 ^154121456.0 0.00000000011 0 force @a[distance=..32]
    particle end_rod ^2.158 ^0.0 ^0.429 ^852750208.0 ^494009440.0 ^169622608.0 0.00000000020 0 force @a[distance=..32]
    particle end_rod ^2.2 ^0.0 ^0.0 ^402738656.0 ^915315008.0 ^-1.5 0.00000000011 0 force @a[distance=..32]
    particle end_rod ^2.158 ^0.0 ^-0.429 ^852750208.0 ^494009440.0 ^-169622608.0 0.00000000020 0 force @a[distance=..32]
    particle end_rod ^2.033 ^0.0 ^-0.842 ^372082176.0 ^915314944.0 ^-154121456.0 0.00000000011 0 force @a[distance=..32]
    particle end_rod ^1.829 ^0.0 ^-1.222 ^722926720.0 ^494009440.0 ^-483044256.0 0.00000000020 0 force @a[distance=..32]
    particle end_rod ^1.556 ^0.0 ^-1.556 ^284779168.0 ^915315008.0 ^-284779168.0 0.00000000011 0 force @a[distance=..32]
    particle end_rod ^1.222 ^0.0 ^-1.829 ^483044256.0 ^494009440.0 ^-722926720.0 0.00000000020 0 force @a[distance=..32]
    particle end_rod ^0.842 ^0.0 ^-2.033 ^154121456.0 ^915314944.0 ^-372082176.0 0.00000000011 0 force @a[distance=..32]
    particle end_rod ^0.429 ^0.0 ^-2.158 ^169622608.0 ^494009440.0 ^-852750208.0 0.00000000020 0 force @a[distance=..32]
    particle end_rod ^-0.0 ^0.0 ^-2.2 ^5.251 ^915315008.0 ^-402738656.0 0.00000000011 0 force @a[distance=..32]
    particle end_rod ^-0.429 ^0.0 ^-2.158 ^-169622608.0 ^494009440.0 ^-852750208.0 0.00000000020 0 force @a[distance=..32]
    particle end_rod ^-0.842 ^0.0 ^-2.033 ^-154121456.0 ^915314944.0 ^-372082176.0 0.00000000011 0 force @a[distance=..32]
    particle end_rod ^-1.222 ^0.0 ^-1.829 ^-483044256.0 ^494009440.0 ^-722926720.0 0.00000000020 0 force @a[distance=..32]
    particle end_rod ^-1.556 ^0.0 ^-1.556 ^-284779168.0 ^915315008.0 ^-284779168.0 0.00000000011 0 force @a[distance=..32]
    particle end_rod ^-1.829 ^0.0 ^-1.222 ^-722926720.0 ^494009440.0 ^-483044256.0 0.00000000020 0 force @a[distance=..32]
    particle end_rod ^-2.033 ^0.0 ^-0.842 ^-372082176.0 ^915314944.0 ^-154121456.0 0.00000000011 0 force @a[distance=..32]
    particle end_rod ^-2.158 ^0.0 ^-0.429 ^-852750208.0 ^494009440.0 ^-169622608.0 0.00000000020 0 force @a[distance=..32]
    particle end_rod ^-2.2 ^0.0 ^0.0 ^-402738656.0 ^915315008.0 ^-1.5 0.00000000011 0 force @a[distance=..32]
    particle end_rod ^-2.158 ^0.0 ^0.429 ^-852750208.0 ^494009440.0 ^169622608.0 0.00000000020 0 force @a[distance=..32]
    particle end_rod ^-2.033 ^0.0 ^0.842 ^-372082176.0 ^915314944.0 ^154121456.0 0.00000000011 0 force @a[distance=..32]
    particle end_rod ^-1.829 ^0.0 ^1.222 ^-722926720.0 ^494009440.0 ^483044256.0 0.00000000020 0 force @a[distance=..32]
    particle end_rod ^-1.556 ^0.0 ^1.556 ^-284779168.0 ^915315008.0 ^284779168.0 0.00000000011 0 force @a[distance=..32]
    particle end_rod ^-1.222 ^0.0 ^1.829 ^-483044256.0 ^494009440.0 ^722926720.0 0.00000000020 0 force @a[distance=..32]
    particle end_rod ^-0.842 ^0.0 ^2.033 ^-154121456.0 ^915314944.0 ^372082176.0 0.00000000011 0 force @a[distance=..32]
    particle end_rod ^-0.429 ^0.0 ^2.158 ^-169622608.0 ^494009440.0 ^852750208.0 0.00000000020 0 force @a[distance=..32]
# 追加パーティクル
    particle dust 1 0 100000000 2 ~ ~1.5 ~ 1 1 1 0 20 force @a[distance=..32]
    particle dust 2 0 100000000 1.5 ~ ~3 ~ 0.75 2 0.75 0 20 force @a[distance=..32]
    particle dust 2 0 100000000 1 ~ ~6 ~ 0.4 4 0.4 0 20 force @a[distance=..32]
    particle gust ~ ~1 ~ 1 1 1 0 10 force @a[distance=..32]
# 音
    playsound entity.generic.explode hostile @a[distance=..32] ~ ~ ~ 0.6 1.5
    playsound entity.breeze.shoot hostile @a[distance=..32] ~ ~ ~ 1 0.85
    playsound entity.breeze.shoot hostile @a[distance=..32] ~ ~ ~ 1 0.86
    playsound block.respawn_anchor.deplete hostile @a[distance=..32] ~ ~ ~ 1 2
    playsound entity.glow_squid.squirt hostile @a[distance=..32] ~ ~ ~ 1 1.5 0
    playsound entity.blaze.shoot hostile @a[distance=..32] ~ ~ ~ 1 1.3
    playsound item.trident.thunder hostile @a[distance=..32] ~ ~ ~ 0.35 2


#> score_holder
# @private
    #declare score_holder $DamageTemp

# 難易度値を取得
    function api:global_vars/get_difficulty

# ダメージ式：難易度数値 × 補正値 + 基礎
# Nは難易度値を示します
    execute store result score $DamageTemp Temporary run data get storage api: Return.Difficulty 7
    scoreboard players add $DamageTemp Temporary 35

# ダメージ
    # 引数の設定
    # 与えるダメージ
        execute store result storage api: Argument.Damage int 1 run scoreboard players get $DamageTemp Temporary
    # 第一属性
        data modify storage api: Argument.AttackType set value "Physical"
    # 第二属性
        data modify storage api: Argument.ElementType set value "Fire"
    # デスログ
        data modify storage api: Argument.DeathMessage append value '[{"translate": "%1$sは%2$sが召喚した剣に身体を貫かれた","with":[{"selector":"@s"},{"nbt":"Return.AttackerName","storage":"lib:","interpret":true}]}]'
# 補正functionを実行
        data modify storage api: Argument.MobUUID set from storage asset:context this.MobUUID
        function api:damage/modifier_manual
# ダメージを与える
    execute as @a[tag=!PlayerShouldInvulnerable,distance=..2.5] at @s run function api:damage/
# リセット
    function api:damage/reset

# リセット
    scoreboard players reset $DamageTemp Temporary

# キル
    kill @s
    kill @e[type=item_display,tag=2014.DimSwordDisplay,distance=..0.001,limit=1]
